<h1>josh.js 0.2</h1><p><a href="http://sdether.github.io/josh.js/">http://sdether.github.io/josh.js/</a></p>
<p><strong><em>Javascript Online SHell</em></strong> provides a toolkit for building bash-like command line consoles for web pages. JOSH enables the visitor who prefers the bash-like command to maneuver through web content using a console rather than clicking with a mouse. This toolkit is most useful for people who like to use command line because it is faster and more effective than using a mouse. It is easier and convienent to access hierarchical information using JOSH command history, change or display current directory.  It consists of the following components:</p>
<ul>
<li><code>readline.js</code> - full readline support for ctrl sequences, tab, history, etc.</li>
<li><code>shell.js</code> - visual presentation of the shell and command handling</li>
<li><code>pathhandler.js</code> - provide cd, ls, pwd and path completion toolikit</li>
<li><code>history.js</code> - localStorage backed command history</li>
<li><code>killring.js</code> - killring for kill &amp; yank handling in readline</li>
</ul>
<h2>What to use Josh for and when to use it</h2><p>Josh allows developers to build their own command line interface to any sites. It supports full CLI Readline in the browser like TAB completion, emacs-style line editing, killring and history with reverse search. When you are tired of clicking your way through a hierachy tree, Josh will come in handy. It will helps you browse or navigate text files quickly and minimal the using of mouse click.</p>
<h2>Tutorials</h2><ul>
<li><a href="http://sdether.github.io/josh.js/helloworld.html">Hello world</a> - put a console on a web page and add a new custom command with completion</li>
<li><a href="http://sdether.github.io/josh.js/quakeconsole.html">Quake Console</a> - Create a <em>quake</em>-style console with <code>ls</code>,
  <code>cd</code>, <code>pwd</code> and bash filename tab-completion</li>
<li><a href="http://sdether.github.io/josh.js/githubconsole.html">GitHub Console</a> - Extend the Quake Console to talk to GitHub&#39;s REST API to navigate repositories, their branches and file system</li>
</ul>
<h2>Articles</h2><ul>
<li><a href="http://www.claassen.net/geek/blog/2013/03/cli-all-the-things-introducing-josh-js.html">CLI all the things: Introducing Josh.js</a> Article about the origins of Josh.js with an example console for wordpress sites.</li>
</ul>
<h2>License</h2><p>josh.js is licensed under the Apache 2.0 License</p>
<h2>Status</h2><ul>
<li>code is ready for experimental use<ul>
<li>Tested under Chrome, Firefox, Safari and IE9</li>
<li>API may not yet be stable</li>
</ul>
</li>
<li>needs minified versions of complete toolkit and just readline.js</li>
<li>needs code documentation and documentation site</li>
<li>would like to add AMD support</li>
<li>base shell UI should get some basic behaviors<ul>
<li><code>more</code>-like handling for output that exceeds the shell viewport size</li>
<li>resizing and close chrome</li>
</ul>
</li>
<li>Readline has not been tested with non-ascii.</li>
</ul>
<h2>Usage</h2><p>Until documentation is written, refer to <code>index.html</code> and <code>example.js</code> (<a href="http://sdether.github.com/josh.js/docs/example.html">Annotated Source</a>) for a sample implementation of a shell with path completion.</p>
<h2>Components</h2><p><strong><em>josh</em></strong> is built from 5 components and can be used in part or in full.</p>
<h3>readline.js</h3><p><code>readline.js</code> has no dependencies on any outside libraries, although it requires either <code>history.js</code> and <code>killring.js</code> or objects implementing the same calls.</p>
<p>It implements key trapping to bring <a href="http://cnswww.cns.cwru.edu/php/chet/readline/readline.html">GNU Readline</a> like line editing to the browser. It can be used by itself to bring readline support to custom data entry fields or in conjunction with <code>shell.js</code> to create a full console.</p>
<h4>Line Editing</h4><p>In the below <code>C-x</code> refers to the <code>Ctrl-x</code> keystroke, while <code>M-x</code> refers to the <code>Meta-x</code> keystroke which is mapped to <code>Alt</code>, <code>âŒ˜</code> and <code>Left Windows</code>.</p>
<dl>
<dt><em>Movement</em></dt>
<dt><code>C-b</code> or <code>Left Arrow</code></dt>
<dd>Move back one character</dd>
<dt><code>M-b</code> or <code>Right Arrow</code></dt>
<dd>Move back one word</dd>
<dt><code>C-f</code></dt>
<dd>Move forward one character</dd>
<dt><code>M-f</code></dt>
<dd>Move forward one word</dd>
<dt><code>C-a</code> or <code>Home</code></dt>
<dd>Move to the beginning of the line</dd>
<dt><code>C-e</code> or <code>End</code></dt>
<dd>Move to the end of the line</dd>

<br/>
<dt><em>Edit/Kill</em></dt>
<dt><code>Backspace</code></dt>
<dd>Delete one character back</dd>
<dt><code>C-d</code> or <code>Delete</code></dt>
<dd>Delete character under cursor</dd>
<dt><code>C-k</code></dt>
<dd><em>Kill</em> (i.e. put in kill ring) text to the end of the line</dd>
<dt><code>M-Backspace</code></dt>
<dd><em>Kill</em> one word back</dd>
<dt><code>M-d</code></dt>
<dd><em>Kill</em> word under cursor</dd>
<dt><code>C-y</code></dt>
<dd><em>Yank</em> (i.e. pull from kill ring) the most recently <em>killed</em> text</dd>
<dt><code>M-y</code></dt>
<dd>Rotate to the next item in killring and yank it. Must be preceded by <em>yank</em></dd>

<br/>
<dt><em>History</em></dt>
<dt><code>C-r</code></dt>
<dd>Reverse search through history</dd>
<dt><code>C-p</code> or <code>Up Arrow</code></dt>
<dd>Previous entry in history</dd>
<dt><code>C-n</code> or <code>Down Arrow</code></dt>
<dd>Next entry in history</dd>
<dt><code>Page Up</code></dt>
<dd>Top of history</dd>
<dt><code>Page Down</code></dt>
<dd>Bottom of history</dd>

<br/>
<dt><em>Misc</em></dt>
<dt><code>C-l</code></dt>
<dd>refresh line (clear screen in shell)</dd>
<dt><code>Tab</code></dt>
<dd>Invoke completion handler for text under cursor</dd>
<dt><code>Esc</code> in reverse search</dt>
<dd>Cancel search</dd>
<dt><code>C-c</code></dt>
<dd>call <code>onCancel</code> handler</dd>
<dt><code>C-d</code> on empty line</dt>
<dd>call <code>onCancel</code> handler</dd>
</dl>

<h3>shell.js</h3><p><code>shell.js</code> has external dependencies of <a href="http://jquery.com/">jQuery</a>, <a href="http://underscorejs.org/">Underscore</a> and internal dependencies of <code>readline.js</code> and <code>history.js</code>.</p>
<p>It provides a simple console UI, using a <em>panel</em> for the console viewport and an auto-scrolling <em>view</em> inside the panel. It uses Underscore templates for generating the view html, although any template generator can be substituted as long as it can be expressed in the form of a function that takes a JSON object of arguments and returns an html string.</p>
<p>It also implements command handling so that new commands can be added by name with execution and completion handlers. Out of the box, <code>shell.js</code> provides the following commands:</p>
<ul>
<li>help - list all known commands (including user added)</li>
<li>clear - clear the &quot;screen&quot; i.e. viewport</li>
<li>history - show the command history captured by <code>readline.js</code> in <code>history.js</code></li>
</ul>
<h3>pathhandler.js</h3><p><code>pathhandler.js</code> is a mix in to easily add the <code>cd</code>, <code>ls</code> and <code>pwd</code> commands as well as path completion. It has the same external dependencies of <a href="http://jquery.com/">jQuery</a>, <a href="http://underscorejs.org/">Underscore</a> as <code>shell.js</code> and also uses Underscore templating.</p>
<p>By implementing the functions <code>getNode</code> and <code>getChildNodes</code>, this library adds path traversal, discovery and completion just like a bash shell.</p>
<h3>history.js</h3><p><code>history.js</code> implements a localStorage back command history storage that persists over page changes and reloads. It is used by the <code>shell.js</code> history command to list all executed commands, and by <code>readline.js</code> for up/down arrow and reverse search capabilities.</p>
<h3>killring.js</h3><p><code>killring.js</code> implements the kill and yank behavior as well as state tracking, i.e. multiple consecutive kills are combined as a single kill and killring rotation tracks the previous yank, so that the <code>readline.js</code> can remove the previous yank and replace it with the rotated text.</p>
<h2>Changelog</h2><p><strong>0.2.10</strong> -- 2014/04/03</p>
<ul>
<li>Added bower support (pr#19 - @bricef)</li>
<li>Code clean-up for closure compiler issues (pr#20 - @aaronmars)</li>
</ul>
<p><strong>0.2.9</strong> -- 2013/08/31</p>
<ul>
<li>Added ability to bind ReadLine/Shell to an element.</li>
<li>Added ability to bind/unbind keys (could be used to replace emacs bindings of readline, but primarily added to unbind some keys for using readline on input elements.</li>
<li>Created input.js for easy binding of readline to either an input element or a span behaving like an input.</li>
</ul>
<p><strong>0.2.8</strong> -- 2013/03/13</p>
<ul>
<li>Added handling of . and .. in Josh.PathHandler.pathcompletionhandler, so that a trailing .. completes to ../ and . to ./</li>
<li>Removed the hardcoded <strong>strong</strong> in the input template, making it a span instead so it can be styled via css instead.</li>
<li>The prompt value itself is now assumed to be html instead of plain text, allowing for richer formatting without changing the input template.</li>
</ul>
<p><strong>0.2.7</strong> -- 2013/02/13</p>
<ul>
<li>Removed all html used for Shell UI generation from config to <code>Shell.templates</code>, so that they can easily be customized (see: <a href="https://github.com/sdether/josh.js/issues/11">Issue 11</a>)</li>
<li>Removed <code>PathHandler.templates</code>. PathHandler now attches its templates to <code>Shell.templates</code> as well</li>
</ul>
<p><strong>0.2.6</strong> -- 2013/01/21</p>
<ul>
<li>Removed Activation/Deactivation keybindings from Readline, making it an outside concern (see: <a href="https://github.com/sdether/josh.js/issues/2">Issue 2</a>)</li>
<li>Fixed Backspace regression introduced by 0.2.5</li>
<li>Fixed <code>M-d</code> not deleting last character of line</li>
<li>Example shell can now be resized (via jquery-ui.resizable)</li>
</ul>
<p><strong>0.2.5</strong> -- 2013/01/14</p>
<ul>
<li>Implemented missing Readline behavior (see: <a href="https://github.com/sdether/josh.js/issues/1">Issue 1</a>)</li>
<li>Added scrollbar to sample implemenation (also adds scrollwheel support)</li>
</ul>
<p><strong>0.2.4</strong> -- 2013/01/14</p>
<ul>
<li>fixed path completion handling for scenarios of two possible completions where one is the root of the other</li>
<li>noted that spaces in paths are completely unsupported right now.. they will complete, but the exec handler will see the space as a separator between arguments</li>
</ul>
<p><strong>0.2.3</strong> -- 2013/01/13</p>
<ul>
<li>changed internal handling of the default command handler (i.e. when no named command is defined).</li>
<li>removed the pathhandler commandhandlers from the public object, since they should be accessed via shell.getCommandHandler if required</li>
<li>some readline.js property naming cleanup to make closure compiler happy</li>
</ul>
<p><strong>0.2.2</strong> -- 2013/01/09</p>
<ul>
<li>changed rendering of completion to be more bash-like, i.e. now renders completion and then re-renders prompt with completed text, rather than as a pop-under that disappears.</li>
</ul>
<p><strong>0.2.1</strong> -- 2013/01/08</p>
<ul>
<li>fixed activation/deactivation propagation through the shell, which caused issues with first time activation via activation key instead of method call to fail.</li>
</ul>
<p><strong>0.2</strong> -- 2013/01/07</p>
<ul>
<li>console wrapper to allow debug logging to be turned on and off</li>
<li>refactored how pathhandler attaches to shell because it needs to keep a reference to the shell</li>
<li>refactored how prompts are set. now uses dedicated callback rather than returning the prompt in the <code>onEnter</code> callback</li>
<li>tested and made fixes to ensure compatibility with major modern browsers</li>
</ul>
<p><strong>0.1</strong> -- 2013/01/04</p>
<ul>
<li>Initial code-complete release</li>
</ul>
